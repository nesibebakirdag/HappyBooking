// KQL script
// Use management commands in this script to configure your database items, such as tables, functions, materialized views, and more.


.create-merge table StreamBookingRaw (booking_id:string, customer_id:long, hotel_id:long, booking_date:datetime, room_type:string, total_amount:real, currency:string, source_system:string, ingestion_time:datetime, hotel_id_1:string, hotel_name:string, country:string, city:string, hotel_type:string, star_rating:long, total_rooms:long, hotel_facilities:string, hotel_description:string, nearby_attractions:string, latitude:real, longitude:real, website:string, customer_id_1:string, first_name:string, last_name:string, full_name:string, email:string, phone:string, birth_date:datetime, gender:string, country_customer:string, city_customer:string, address:string, postal_code:string, language_preference:string, loyalty_level_customer:string, registration_date:datetime, marketing_consent:bool, checkin_date:datetime, checkout_date:datetime, nights:int, adults:long, children:int, infants:int, rooms_booked:int, booking_channel:string, special_requests:string, is_cancelled:bool, cancellation_date:datetime, cancellation_reason:string, total_price:real, room_price:real, tax_amount:real, service_fee:real, paid_amount:real, payment_status:string, payment_method:string, booking_source:string, promotion_code:string, discount_amount:real, created_timestamp:datetime, updated_timestamp:datetime, created_by:string, booking_status:string, review_id:string, review_rating:long, review_title:string, review_text:string, review_date:datetime, helpful_votes:long, is_verified_review:bool, reviewer_location:string, stay_date:string, trip_type:string, room_type_reviewed:string, created_at:datetime, updated_at:datetime, event_time:datetime, source:string) 
.create-or-alter table StreamBookingRaw ingestion json mapping 'StreamBookingRaw_mapping'
```
[{"Properties":{"Path":"$['booking_id']"},"column":"booking_id","datatype":""},{"Properties":{"Path":"$['booking_date']"},"column":"booking_date","datatype":""},{"Properties":{"Path":"$['room_type']"},"column":"room_type","datatype":""},{"Properties":{"Path":"$['source_system']"},"column":"source_system","datatype":""},{"Properties":{"Path":"$['hotel_id']"},"column":"hotel_id_1","datatype":""},{"Properties":{"Path":"$['hotel_name']"},"column":"hotel_name","datatype":""},{"Properties":{"Path":"$['country']"},"column":"country","datatype":""},{"Properties":{"Path":"$['city']"},"column":"city","datatype":""},{"Properties":{"Path":"$['hotel_type']"},"column":"hotel_type","datatype":""},{"Properties":{"Path":"$['star_rating']"},"column":"star_rating","datatype":""},{"Properties":{"Path":"$['total_rooms']"},"column":"total_rooms","datatype":""},{"Properties":{"Path":"$['hotel_facilities']"},"column":"hotel_facilities","datatype":""},{"Properties":{"Path":"$['hotel_description']"},"column":"hotel_description","datatype":""},{"Properties":{"Path":"$['nearby_attractions']"},"column":"nearby_attractions","datatype":""},{"Properties":{"Path":"$['latitude']"},"column":"latitude","datatype":""},{"Properties":{"Path":"$['longitude']"},"column":"longitude","datatype":""},{"Properties":{"Path":"$['website']"},"column":"website","datatype":""},{"Properties":{"Path":"$['customer_id']"},"column":"customer_id_1","datatype":""},{"Properties":{"Path":"$['first_name']"},"column":"first_name","datatype":""},{"Properties":{"Path":"$['last_name']"},"column":"last_name","datatype":""},{"Properties":{"Path":"$['full_name']"},"column":"full_name","datatype":""},{"Properties":{"Path":"$['email']"},"column":"email","datatype":""},{"Properties":{"Path":"$['phone']"},"column":"phone","datatype":""},{"Properties":{"Path":"$['birth_date']"},"column":"birth_date","datatype":""},{"Properties":{"Path":"$['gender']"},"column":"gender","datatype":""},{"Properties":{"Path":"$['country_customer']"},"column":"country_customer","datatype":""},{"Properties":{"Path":"$['city_customer']"},"column":"city_customer","datatype":""},{"Properties":{"Path":"$['address']"},"column":"address","datatype":""},{"Properties":{"Path":"$['postal_code']"},"column":"postal_code","datatype":""},{"Properties":{"Path":"$['language_preference']"},"column":"language_preference","datatype":""},{"Properties":{"Path":"$['loyalty_level_customer']"},"column":"loyalty_level_customer","datatype":""},{"Properties":{"Path":"$['registration_date']"},"column":"registration_date","datatype":""},{"Properties":{"Path":"$['marketing_consent']"},"column":"marketing_consent","datatype":""},{"Properties":{"Path":"$['checkin_date']"},"column":"checkin_date","datatype":""},{"Properties":{"Path":"$['checkout_date']"},"column":"checkout_date","datatype":""},{"Properties":{"Path":"$['nights']"},"column":"nights","datatype":""},{"Properties":{"Path":"$['adults']"},"column":"adults","datatype":""},{"Properties":{"Path":"$['children']"},"column":"children","datatype":""},{"Properties":{"Path":"$['infants']"},"column":"infants","datatype":""},{"Properties":{"Path":"$['rooms_booked']"},"column":"rooms_booked","datatype":""},{"Properties":{"Path":"$['booking_channel']"},"column":"booking_channel","datatype":""},{"Properties":{"Path":"$['special_requests']"},"column":"special_requests","datatype":""},{"Properties":{"Path":"$['is_cancelled']"},"column":"is_cancelled","datatype":""},{"Properties":{"Path":"$['cancellation_date']"},"column":"cancellation_date","datatype":""},{"Properties":{"Path":"$['cancellation_reason']"},"column":"cancellation_reason","datatype":""},{"Properties":{"Path":"$['total_price']"},"column":"total_price","datatype":""},{"Properties":{"Path":"$['room_price']"},"column":"room_price","datatype":""},{"Properties":{"Path":"$['tax_amount']"},"column":"tax_amount","datatype":""},{"Properties":{"Path":"$['service_fee']"},"column":"service_fee","datatype":""},{"Properties":{"Path":"$['paid_amount']"},"column":"paid_amount","datatype":""},{"Properties":{"Path":"$['payment_status']"},"column":"payment_status","datatype":""},{"Properties":{"Path":"$['payment_method']"},"column":"payment_method","datatype":""},{"Properties":{"Path":"$['booking_source']"},"column":"booking_source","datatype":""},{"Properties":{"Path":"$['promotion_code']"},"column":"promotion_code","datatype":""},{"Properties":{"Path":"$['discount_amount']"},"column":"discount_amount","datatype":""},{"Properties":{"Path":"$['created_timestamp']"},"column":"created_timestamp","datatype":""},{"Properties":{"Path":"$['updated_timestamp']"},"column":"updated_timestamp","datatype":""},{"Properties":{"Path":"$['created_by']"},"column":"created_by","datatype":""},{"Properties":{"Path":"$['booking_status']"},"column":"booking_status","datatype":""},{"Properties":{"Path":"$['review_id']"},"column":"review_id","datatype":""},{"Properties":{"Path":"$['review_rating']"},"column":"review_rating","datatype":""},{"Properties":{"Path":"$['review_title']"},"column":"review_title","datatype":""},{"Properties":{"Path":"$['review_text']"},"column":"review_text","datatype":""},{"Properties":{"Path":"$['review_date']"},"column":"review_date","datatype":""},{"Properties":{"Path":"$['helpful_votes']"},"column":"helpful_votes","datatype":""},{"Properties":{"Path":"$['is_verified_review']"},"column":"is_verified_review","datatype":""},{"Properties":{"Path":"$['reviewer_location']"},"column":"reviewer_location","datatype":""},{"Properties":{"Path":"$['stay_date']"},"column":"stay_date","datatype":""},{"Properties":{"Path":"$['trip_type']"},"column":"trip_type","datatype":""},{"Properties":{"Path":"$['room_type_reviewed']"},"column":"room_type_reviewed","datatype":""},{"Properties":{"Path":"$['created_at']"},"column":"created_at","datatype":""},{"Properties":{"Path":"$['updated_at']"},"column":"updated_at","datatype":""},{"Properties":{"Path":"$['event_time']"},"column":"event_time","datatype":""},{"Properties":{"Path":"$['source']"},"column":"source","datatype":""}]
```
